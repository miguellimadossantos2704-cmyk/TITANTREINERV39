<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TITAN TRAINER V10</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Poppins:wght@300;400;600;700&display=swap"
        rel="stylesheet">

    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <header>
        <span class="subtitle" data-i18n="subtitle">Ultimate Fitness Database</span>
        <h1 class="logo" data-i18n="title">TITAN V10</h1>
    </header>

    <!-- Navigation Tabs -->
    <div class="tab-navigation">
        <button class="tab-btn active" data-tab="routinesDashboard">
            <i>üí™</i>
            <span data-i18n="workouts">TREINOS</span>
        </button>
        <button class="tab-btn" data-tab="progressTab">
            <i>üìà</i>
            <span data-i18n="progress">PROGRESSO</span>
        </button>
        <button class="tab-btn" data-tab="dietTab">
            <i>üçé</i>
            <span data-i18n="diet">DIETA</span>
        </button>
        <button class="tab-btn" data-tab="bmiTab">
            <i>‚öñÔ∏è</i>
            <span data-i18n="bmi">CALC. IMC</span>
        </button>
        <button class="tab-btn" data-tab="settingsTab">
            <i>‚öôÔ∏è</i>
            <span data-i18n="settings">CONFIG</span>
        </button>
    </div>

    <!-- SECTION: MY ROUTINES (HEVY STYLE) -->
    <section id="routinesDashboard" class="tab-content active">
        <div class="diet-container">

            <!-- VIEW: ROUTINES DASHBOARD -->
            <div id="routinesContent">
                <div class="diet-summary">
                    <h2 style="margin:0; color:#fff;" data-i18n="my_routines">Meus Treinos</h2>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 5px;"
                        data-i18n="manage_routines">
                        Gerencie suas fichas.</p>
                </div>

                <div class="routines-grid" id="routinesGrid">
                    <!-- Routine Cards Rendered Here -->
                </div>
            </div>
        </div>

        <!-- VIEW: SINGLE ROUTINE DETAIL -->
        <div id="routineDetail" class="hidden">

            <div class="diet-container">
                <div class="routine-header">
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <button onclick="closeRoutineDetail()" class="back-btn" data-i18n="back">
                            ‚Üê Voltar
                        </button>

                        <!-- Focus Mode Toggle -->
                        <button id="focusToggleBtn" class="back-btn" onclick="toggleFocusMode()"
                            style="background: rgba(0,255,136,0.1); color: var(--accent); border: 1px solid var(--accent);">
                            üéØ Modo Foco
                        </button>
                    </div>

                    <div style="margin-top: 1rem;">
                        <div style="display:flex; justify-content:space-between; align-items:end;">
                            <h2 id="routineTitle" style="color:white; margin:0;">Nome do Treino</h2>
                            <span id="routineCount" style="color:var(--text-secondary); font-size:0.9rem;">0 Ex</span>
                        </div>

                        <!-- NEW PROGRESS BAR -->
                        <div class="main-progress-container">
                            <div id="routineProgressBar" class="main-progress-fill"></div>
                        </div>
                        <div style="text-align:right; font-size:0.8rem; color:var(--text-secondary);">
                            <span id="progressText">0%</span> Conclu√≠do
                        </div>
                    </div>
                </div>

                <!-- ADD EXERCISE -->
                <button class="action-btn" onclick="openExerciseSelector()" style="width:100%; margin-bottom: 1.5rem;"
                    data-i18n="add_exercise">+ Adicionar Exerc√≠cio</button>

                <div class="focus-overlay-info">
                    Mantenha o foco. Termine o exerc√≠cio atual.
                </div>

                <div class="list-container">
                    <table style="width:100%;">
                        <thead>
                            <tr>
                                <th data-i18n="exercise_name">Exerc√≠cio</th>
                                <th data-i18n="series" style="width: 80px;">S√©ries</th>
                                <!-- Action column often hidden on mobile or simplified -->
                                <th style="width: 50px;">Check</th>
                            </tr>
                        </thead>
                        <tbody id="routineTableBody">
                            <!-- Exercises -->
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </section>

    <!-- SECTION: PROGRESS & CHARTS -->
    <section id="progressTab" class="tab-content">
        <div class="diet-container">
            <div class="diet-summary">
                <h2 data-i18n="weight-evolution">Evolu√ß√£o de Peso</h2>
                <div style="position: relative; height: 300px; width: 100%;">
                    <canvas id="chartWeight"></canvas>
                </div>
            </div>

            <div class="diet-summary" style="margin-top: 2rem;">
                <h2 data-i18n="training-volume">Volume de Treino Total</h2>
                <p style="color:#aaa; font-size:0.8rem;">(S√©ries x Repeti√ß√µes Realizadas)</p>
                <div style="position: relative; height: 300px; width: 100%;">
                    <canvas id="chartVolume"></canvas>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION: DIET -->
    <section id="dietTab" class="tab-content">
        <div class="diet-container">
            <div class="diet-summary">
                <h2 data-i18n="daily_summary">Resumo Di√°rio</h2>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:1rem; margin-top:1rem;">
                    <div style="background:#111; padding:1rem; border-radius:12px; text-align:center;">
                        <span style="display:block; color:#aaa; font-size:0.8rem;" data-i18n="calories">Calorias</span>
                        <span id="totalKcal" style="font-size:1.5rem; font-weight:bold; color:var(--accent);">0</span>
                    </div>
                    <div style="background:#111; padding:1rem; border-radius:12px; text-align:center;">
                        <span style="display:block; color:#aaa; font-size:0.8rem;" data-i18n="protein">Prote√≠nas</span>
                        <span id="totalProtein" style="font-size:1.5rem; font-weight:bold; color:white;">0</span>
                    </div>
                    <div style="background:#111; padding:1rem; border-radius:12px; text-align:center;">
                        <span style="display:block; color:#aaa; font-size:0.8rem;" data-i18n="carbs">Carbos</span>
                        <span id="totalCarbs" style="font-size:1.5rem; font-weight:bold; color:white;">0</span>
                    </div>
                    <div style="background:#111; padding:1rem; border-radius:12px; text-align:center;">
                        <span style="display:block; color:#aaa; font-size:0.8rem;" data-i18n="fat">Gorduras</span>
                        <span id="totalFat" style="font-size:1.5rem; font-weight:bold; color:white;">0</span>
                    </div>
                </div>
            </div>

            <!-- MANUAL ENTRY -->
            <div class="diet-summary">
                <h3 data-i18n="add-food-title">Adicionar Alimento</h3>
                <div style="display:flex; flex-direction:column; gap:1rem; margin-top:1rem;">
                    <input type="text" id="food-name" placeholder="Nome do Alimento (ex: Arroz)"
                        data-i18n="food-placeholder">
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:0.5rem;">
                        <input type="number" id="food-kcal" placeholder="Kcal">
                        <input type="number" id="food-protein" placeholder="Prot (g)">
                        <input type="number" id="food-carbs" placeholder="Carb (g)">
                        <input type="number" id="food-fat" placeholder="Fat (g)">
                    </div>
                    <button id="btn-add-food" class="action-btn" data-i18n="add-to-diary">Adicionar</button>
                    <!-- Suggestions Box -->
                </div>
            </div>

            <div class="diet-summary">
                <h3 data-i18n="food_log">Di√°rio Alimentar</h3>
                <table style="margin-top:1rem;">
                    <tbody id="foodTableBody">
                        <!-- Items -->
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- SECTION: BMI -->
    <section id="bmiTab" class="tab-content">
        <div class="bmi-container">
            <div class="diet-summary" style="text-align:center;">
                <h2 data-i18n="bmi">Calculadora IMC</h2>
                <div style="margin:2rem 0;">
                    <div style="margin-bottom:1rem;">
                        <label data-i18n="height_label"
                            style="display:block; text-align:left; color:#aaa; margin-bottom:5px;">Altura (cm)</label>
                        <input type="number" id="bmiHeight" placeholder="175">
                    </div>
                    <div style="margin-bottom:1rem;">
                        <label data-i18n="weight_label"
                            style="display:block; text-align:left; color:#aaa; margin-bottom:5px;">Peso (kg)</label>
                        <input type="number" id="bmiWeight" placeholder="70">
                    </div>
                    <button id="calcBmiBtn" class="action-btn" style="width:100%;"
                        data-i18n="calculate">Calcular</button>
                </div>

                <div id="bmiResult" class="hidden"
                    style="margin-top:2rem; padding:1.5rem; background:#181818; border-radius:12px; border:1px solid var(--accent);">
                    <div id="bmiScore" style="font-size:3rem; font-weight:bold; color:white;">0.0</div>
                    <div id="bmiStatus" style="font-size:1.2rem; color:var(--accent); letter-spacing:2px;">NORMAL</div>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION: SETTINGS -->
    <section id="settingsTab" class="tab-content">
        <div class="diet-container">
            <div class="diet-summary">
                <h2 data-i18n="settings">Configura√ß√µes</h2>
                <div style="margin-top: 1.5rem;">
                    <label data-i18n="change_language" style="color:#aaa;">Idioma</label>
                    <select id="languageSelect" style="margin-top:0.5rem;">
                        <option value="pt">Portugu√™s üáßüá∑</option>
                        <option value="en">English üá∫üá∏</option>
                        <option value="es">Espa√±ol üá™üá∏</option>
                        <option value="jp">Êó•Êú¨Ë™û üáØüáµ</option>
                    </select>
                </div>

                <div style="margin-top: 2rem; border-top:1px solid #333; padding-top:2rem;">
                    <h3 data-i18n="data_security">Dados</h3>
                    <button class="action-btn" onclick="exportBackup()"
                        style="width:100%; background:#222; border:1px solid #444; margin-bottom:1rem;">Backup
                        (JSON)</button>
                    <label for="importFile" class="action-btn"
                        style="width:100%; background:#222; border:1px solid #444; display:block; text-align:center;">Restaurar</label>
                    <input type="file" id="importFile" hidden accept=".json" onchange="importBackup(event)">
                </div>
            </div>
        </div>
    </section>

    <footer>
        <p>&copy; 2026 TitanTrainer V10</p>
        <div class="status-container">
            <p class="status-text">‚ö†Ô∏è Vers√£o V10 em andamento - Novas atualiza√ß√µes em breve.</p>
        </div>
    </footer>

    <!-- REST TIMER STICKY BAR -->
    <div id="restTimerBar" class="timer-bar hidden">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <div class="timer-display" id="timerDisplay">00:00</div>
            <button class="timer-btn" onclick="stopTimer()"
                style="background:rgba(255,0,0,0.2); color:#ff5555; max-width:80px;">Parar</button>
        </div>
        <div class="timer-controls">
            <button class="timer-btn" onclick="addTime(-30)">-30s</button>
            <button class="timer-btn" onclick="addTime(30)">+30s</button>
            <button class="timer-btn" onclick="addTime(10)">+10s</button>
        </div>
        <div style="background:#333; height:4px; border-radius:2px; margin-top:5px; width:100%; overflow:hidden;">
            <div id="timerProgress" style="height:100%; background:var(--accent); width:0%;"></div>
        </div>
    </div>

    <!-- MODAL: EXERCISE SELECTOR -->
    <div id="exerciseSelectorModal" class="modal-overlay hidden">
        <div class="modal-box" style="height: 80vh; display:flex; flex-direction:column;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem;">
                <h3 data-i18n="select_exercise" style="margin:0; color:#fff;">Exerc√≠cios</h3>
                <button onclick="closeExerciseSelector()"
                    style="background:none; border:none; color:#fff; font-size:2rem;">&times;</button>
            </div>

            <input type="text" id="selectorSearch" placeholder="Buscar..." data-i18n="search_exercise_ph">

            <div id="selectorList" style="flex:1; overflow-y:auto; margin-top:1rem;">
                <!-- List -->
            </div>
        </div>
    </div>

    <!-- MODAL: CREATE ROUTINE -->
    <div id="createRoutineModal" class="modal-overlay hidden">
        <div class="modal-box">
            <h3 data-i18n="create_routine" style="color:var(--accent); margin-bottom:1rem;">Novo Treino</h3>
            <input type="text" id="newRoutineName" placeholder="Nome (ex: Treino A)" data-i18n="routine_name_ph">
            <div style="display:flex; gap:1rem; margin-top:1.5rem;">
                <button class="action-btn" onclick="confirmCreateRoutine()" style="flex:1;">Criar</button>
                <button class="action-btn" onclick="closeCreateRoutineModal()"
                    style="flex:1; background:#333;">Cancelar</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script src="i18n.js"></script>
</body>

</html>